# üîß –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è XBrovary Bot

## üìã –®–≤–∏–¥–∫–µ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –ø—Ä–æ–±–ª–µ–º

### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞: "chat not found"

**–ü—Ä–∏—á–∏–Ω–∞:** –ê–¥–º—ñ–Ω–∏ –Ω–µ –∑–∞–ø—É—Å—Ç–∏–ª–∏ –±–æ—Ç–∞ –∫–æ–º–∞–Ω–¥–æ—é `/start`

**–†—ñ—à–µ–Ω–Ω—è:**
1. –ö–æ–∂–µ–Ω –∞–¥–º—ñ–Ω –û–ë–û–í'–Ø–ó–ö–û–í–û –ø–æ–≤–∏–Ω–µ–Ω:
   - –í—ñ–¥–∫—Ä–∏—Ç–∏ –±–æ—Ç–∞ –≤ Telegram
   - –ù–∞—Ç–∏—Å–Ω—É—Ç–∏ `/start`
   - –¢—ñ–ª—å–∫–∏ –ø—ñ—Å–ª—è —Ü—å–æ–≥–æ –±–æ—Ç –∑–º–æ–∂–µ –Ω–∞–¥—Å–∏–ª–∞—Ç–∏ —ó–º –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è

### ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º–∞: "Update is not handled"

**–ü—Ä–∏—á–∏–Ω–∞:** –ë–æ—Ç –æ—Ç—Ä–∏–º—É—î –æ–Ω–æ–≤–ª–µ–Ω–Ω—è, —è–∫—ñ –Ω–µ –æ–±—Ä–æ–±–ª—è—é—Ç—å—Å—è

**–†—ñ—à–µ–Ω–Ω—è:** –í–∂–µ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–æ! –î–æ–¥–∞–Ω–æ —É–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–∏–π –æ–±—Ä–æ–±–Ω–∏–∫ –¥–ª—è –ª–æ–≥—É–≤–∞–Ω–Ω—è –Ω–µ–æ–±—Ä–æ–±–ª–µ–Ω–∏—Ö –æ–Ω–æ–≤–ª–µ–Ω—å.

---

## üöÄ –ü–æ—á–∞—Ç–∫–æ–≤–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

### 1. –°—Ç–≤–æ—Ä—ñ—Ç—å —Ñ–∞–π–ª `.env`

–°–∫–æ–ø—ñ—é–π—Ç–µ `.env.example` —Ç–∞ –∑–∞–ø–æ–≤–Ω—ñ—Ç—å —Å–≤–æ—ó–º–∏ –¥–∞–Ω–∏–º–∏:

```bash
cp .env.example .env
```

### 2. –ó–∞–ø–æ–≤–Ω—ñ—Ç—å `.env` —Ñ–∞–π–ª

```env
# –û—Ç—Ä–∏–º–∞–π—Ç–µ —Ç–æ–∫–µ–Ω –≤—ñ–¥ @BotFather
BOT_TOKEN=1234567890:ABCdefGHIjklMNOpqrsTUVwxyz

# ID –∫–∞–Ω–∞–ª—É (–∑ –º—ñ–Ω—É—Å–æ–º –¥–ª—è –ø—Ä–∏–≤–∞—Ç–Ω–∏—Ö/—Å—É–ø–µ—Ä–≥—Ä—É–ø)
# –Ø–∫ –¥—ñ–∑–Ω–∞—Ç–∏—Å—è: –¥–æ–¥–∞–π—Ç–µ @userinfobot –≤ –∫–∞–Ω–∞–ª
CHANNEL_ID=-1001234567890

# ID –∞–¥–º—ñ–Ω—ñ–≤ (—á–µ—Ä–µ–∑ –∫–æ–º—É –ë–ï–ó –ø—Ä–æ–±—ñ–ª—ñ–≤)
# –Ø–∫ –¥—ñ–∑–Ω–∞—Ç–∏—Å—è —Å–≤—ñ–π ID: –Ω–∞–ø–∏—à—ñ—Ç—å –±–æ—Ç—É –∫–æ–º–∞–Ω–¥—É /id –ø—ñ—Å–ª—è –∑–∞–ø—É—Å–∫—É
ADMIN_IDS=[8301907162,123456789,987654321]

# URL –±–∞–∑–∏ –¥–∞–Ω–∏—Ö PostgreSQL
DATABASE_URL=postgresql://username:password@localhost:5432/database_name
```

### 3. –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ

```bash
pip install -r requirements.txt
```

### 4. –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–∏—Ö

```bash
python -c "from database.db import db; import asyncio; asyncio.run(db.connect())"
```

### 5. –í–ê–ñ–õ–ò–í–û: –ó–∞–ø—É—Å—Ç—ñ—Ç—å –±–æ—Ç–∞ –¥–ª—è –∞–¥–º—ñ–Ω—ñ–≤!

**–ö–†–ò–¢–ò–ß–ù–û!** –ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –±–æ—Ç–∞:

1. –ö–æ–∂–µ–Ω –∞–¥–º—ñ–Ω —ñ–∑ —Å–ø–∏—Å–∫—É `ADMIN_IDS` –ø–æ–≤–∏–Ω–µ–Ω:
   - –ó–Ω–∞–π—Ç–∏ –±–æ—Ç–∞ –≤ Telegram (–∑–∞ username)
   - –ù–∞—Ç–∏—Å–Ω—É—Ç–∏ **START** –∞–±–æ –Ω–∞–ø–∏—Å–∞—Ç–∏ `/start`
   - –ë–æ—Ç –≤—ñ–¥–ø–æ–≤—ñ—Å—Ç—å –≤—ñ—Ç–∞–ª—å–Ω–∏–º –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º

2. –Ø–∫—â–æ –∞–¥–º—ñ–Ω –ù–ï –∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞:
   - –í—ñ–Ω –ù–ï –æ—Ç—Ä–∏–º—É–≤–∞—Ç–∏–º–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤—ñ–¥ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
   - –í –ª–æ–≥–∞—Ö –±—É–¥–µ –ø–æ–º–∏–ª–∫–∞ `chat not found`

### 6. –ó–∞–ø—É—Å—Ç—ñ—Ç—å –±–æ—Ç–∞

```bash
python main.py
```

---

## üìä –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å

–ü—Ä–∏ –∑–∞–ø—É—Å–∫—É –±–æ—Ç –ø–æ–∫–∞–∂–µ:
```
üöÄ –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –±–æ—Ç–∞...
üìã –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è:
  - –ö–∞–Ω–∞–ª ID: -1001234567890
  - –ê–¥–º—ñ–Ω—ñ–≤ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ: 3
  - ID –∞–¥–º—ñ–Ω—ñ–≤: [8301907162, 123456789, 987654321]
  ‚ö†Ô∏è  –£–í–ê–ì–ê: –í—Å—ñ –∞–¥–º—ñ–Ω–∏ –ü–û–í–ò–ù–ù–Ü –∑–∞–ø—É—Å—Ç–∏—Ç–∏ –±–æ—Ç–∞ –∫–æ–º–∞–Ω–¥–æ—é /start!
‚úÖ –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ –ë–î —É—Å–ø—ñ—à–Ω–µ (Connection Pool)
üóëÔ∏è –û—á–∏—â–µ–Ω–Ω—è —á–µ—Ä–≥–∏ —Å—Ç–∞—Ä–∏—Ö –æ–Ω–æ–≤–ª–µ–Ω—å...
‚úÖ –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω–∏–π! –û—á—ñ–∫—É—é –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å...
```

---

## üîç –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ —Ä–æ–±–æ—Ç–∏

### –£—Å–ø—ñ—à–Ω–µ –Ω–∞–¥—Å–∏–ª–∞–Ω–Ω—è –∞–¥–º—ñ–Ω–∞–º:
```
‚úÖ –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –Ω–∞–¥—ñ—Å–ª–∞–Ω–æ –∞–¥–º—ñ–Ω—É 8301907162
üì® –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–æ 3/3 –∞–¥–º—ñ–Ω–∞–º
```

### –ü—Ä–æ–±–ª–µ–º–∏ –∑ –∞–¥–º—ñ–Ω–∞–º–∏:
```
‚ö†Ô∏è –ê–¥–º—ñ–Ω 768893258 –Ω–µ –∑–∞–ø—É—Å—Ç–∏–≤ –±–æ—Ç–∞! –ü–æ–ø—Ä–æ—Å—ñ—Ç—å –π–æ–≥–æ –Ω–∞—Ç–∏—Å–Ω—É—Ç–∏ /start
‚ùå –ù–µ –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–æ –∞–¥–º—ñ–Ω–∞–º: [768893258, 1633275324]
üí° –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—å, —â–æ –≤—Å—ñ –∞–¥–º—ñ–Ω–∏ –∑–∞–ø—É—Å—Ç–∏–ª–∏ –±–æ—Ç–∞ –∫–æ–º–∞–Ω–¥–æ—é /start
```

### –ù–µ–æ–±—Ä–æ–±–ª–µ–Ω—ñ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è:
```
‚ö†Ô∏è –ù–µ–æ–±—Ä–æ–±–ª–µ–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è: 849095867
  –¢–∏–ø: –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤—ñ–¥ 123456789
  –¢–µ–∫—Å—Ç: –ü—Ä–∏–≤—ñ—Ç...
```

---

## ‚ùì –ß–∞—Å—Ç—ñ –ø–∏—Ç–∞–Ω–Ω—è

### –Ø–∫ –¥—ñ–∑–Ω–∞—Ç–∏—Å—è ID –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞?
1. –ê–¥–º—ñ–Ω–∏: `/id` –≤ –±–æ—Ç—ñ
2. –Ü–Ω—à—ñ: —á–µ—Ä–µ–∑ @userinfobot

### –Ø–∫ –¥—ñ–∑–Ω–∞—Ç–∏—Å—è ID –∫–∞–Ω–∞–ª—É?
1. –î–æ–¥–∞–π—Ç–µ @userinfobot –≤ –∫–∞–Ω–∞–ª
2. –ü–µ—Ä–µ—Å–ª–∞—Ç–∏ –±—É–¥—å-—è–∫–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∑ –∫–∞–Ω–∞–ª—É –±–æ—Ç—É
3. –í—ñ–Ω –ø–æ–∫–∞–∂–µ ID (–∑ –º—ñ–Ω—É—Å–æ–º –¥–ª—è –ø—Ä–∏–≤–∞—Ç–Ω–∏—Ö)

### –ß–æ–º—É –±–æ—Ç –Ω–µ –Ω–∞–¥—Å–∏–ª–∞—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∞–¥–º—ñ–Ω–∞–º?
**99% –≤–∏–ø–∞–¥–∫—ñ–≤:** –ê–¥–º—ñ–Ω–∏ –Ω–µ –∑–∞–ø—É—Å—Ç–∏–ª–∏ –±–æ—Ç–∞ –∫–æ–º–∞–Ω–¥–æ—é `/start`

**–†—ñ—à–µ–Ω–Ω—è:** –ö–æ–∂–µ–Ω –∞–¥–º—ñ–Ω –ø–æ–≤–∏–Ω–µ–Ω:
1. –ó–Ω–∞–π—Ç–∏ –±–æ—Ç–∞ –≤ Telegram
2. –ù–∞—Ç–∏—Å–Ω—É—Ç–∏ START
3. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —â–æ –±–æ—Ç –≤—ñ–¥–ø–æ–≤—ñ–≤

### –ë–æ—Ç –ø—Ä–∞—Ü—é—î, –∞–ª–µ –¥–µ—è–∫—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –Ω–µ –æ–±—Ä–æ–±–ª—è—é—Ç—å—Å—è?
–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏ - —Ç–µ–ø–µ—Ä –≤–æ–Ω–∏ –ø–æ–∫–∞–∑—É—é—Ç—å –¥–µ—Ç–∞–ª—å–Ω—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –Ω–µ–æ–±—Ä–æ–±–ª–µ–Ω—ñ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è.

---

## üõ†Ô∏è –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó
python test_config.py

# –¢–µ—Å—Ç–æ–≤–∏–π –∑–∞–ø—É—Å–∫
python test_bot.py
```

---

## üìù –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É

```
hb_bot/
‚îú‚îÄ‚îÄ .env                    # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è (–ù–ï –∫–æ–º—ñ—Ç–∏—Ç–∏!)
‚îú‚îÄ‚îÄ .env.example           # –ü—Ä–∏–∫–ª–∞–¥ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó
‚îú‚îÄ‚îÄ main.py                # –ì–æ–ª–æ–≤–Ω–∏–π —Ñ–∞–π–ª
‚îú‚îÄ‚îÄ config.py              # –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
‚îú‚îÄ‚îÄ keyboards.py           # –ö–ª–∞–≤—ñ–∞—Ç—É—Ä–∏
‚îú‚îÄ‚îÄ handlers/              # –û–±—Ä–æ–±–Ω–∏–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ start.py
‚îÇ   ‚îú‚îÄ‚îÄ news.py
‚îÇ   ‚îú‚îÄ‚îÄ ad.py
‚îÇ   ‚îú‚îÄ‚îÄ other.py
‚îÇ   ‚îî‚îÄ‚îÄ admin.py
‚îú‚îÄ‚îÄ database/
‚îÇ   ‚îî‚îÄ‚îÄ db.py             # –†–æ–±–æ—Ç–∞ –∑ –ë–î
‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îú‚îÄ‚îÄ notify_admins.py  # –ù–∞–¥—Å–∏–ª–∞–Ω–Ω—è –∞–¥–º—ñ–Ω–∞–º
‚îÇ   ‚îú‚îÄ‚îÄ watermark.py      # –í–æ—Ç–µ—Ä–º–∞—Ä–∫–∏
‚îÇ   ‚îî‚îÄ‚îÄ album_middleware.py
‚îî‚îÄ‚îÄ states/
    ‚îî‚îÄ‚îÄ feedback_states.py
```

---

## üö® –ü—ñ–¥—Ç—Ä–∏–º–∫–∞

–Ø–∫—â–æ –ø—Ä–æ–±–ª–µ–º–∏ –Ω–µ –∑–Ω–∏–∫–∞—é—Ç—å –ø—ñ—Å–ª—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –≤—Å—ñ—Ö –∫—Ä–æ–∫—ñ–≤:

1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏: `python main.py 2>&1 | tee bot.log`
2. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ `.env` —Ñ–∞–π–ª
3. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—å, —â–æ –í–°–Ü –∞–¥–º—ñ–Ω–∏ –∑–∞–ø—É—Å—Ç–∏–ª–∏ –±–æ—Ç–∞
4. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –¥–æ—Å—Ç—É–ø –¥–æ –ë–î

–†–æ–∑—Ä–æ–±–Ω–∏–∫: @kilativ100
